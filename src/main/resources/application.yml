# ================================
# APPLICATION CONFIGURATION
# ================================
app:
  name: Claims Incidents Microservice
  description: Microservicio para gestión de reclamos e incidentes
  version: 2.0.0
  data:
    initialize: false  # Deshabilitar la carga automática de datos
  external:
    user-service:
      base-url: ${USER_SERVICE_URL:https://lab.vallegrande.edu.pe/jass/ms-users}
      organization-id: ${ORGANIZATION_ID:6896b2ecf3e398570ffd99d3}
      timeout: ${USER_SERVICE_TIMEOUT:30s}
      retry-attempts: ${USER_SERVICE_RETRY:3}
      circuit-breaker:
        enabled: ${USER_SERVICE_CIRCUIT_BREAKER:true}
        failure-threshold: 5
        timeout: 60s

# ================================
# SERVER CONFIGURATION
# ================================
server:
  port: ${SERVER_PORT:8089}
  address: 0.0.0.0  # Permitir conexiones desde cualquier interfaz

# ================================
# SPRING CONFIGURATION
# ================================
spring:
  application:
    name: vg-ms-claims-incidents
  data:
    mongodb:
      uri: mongodb+srv://santiago:santiago19@cluster0.b7mgq.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0
      database: claims-incidents
  jackson:
    date-format: yyyy-MM-dd'T'HH:mm:ss.SSS'Z'
    time-zone: UTC
    serialization:
      write-dates-as-timestamps: false
    deserialization:
      adjust-dates-to-context-time-zone: false
      fail-on-unknown-properties: false

# ================================
# CORS CONFIGURATION
# ================================
cors:
  allowed-origins: "*"
  allowed-methods: GET,POST,PUT,DELETE,PATCH,OPTIONS,HEAD
  allowed-headers: "*"
  allow-credentials: true
  max-age: 3600

# ================================
# API DOCUMENTATION (OpenAPI/Swagger)
# ================================
springdoc:
  api-docs:
    path: /v3/api-docs
    enabled: true
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    try-it-out-enabled: true
    operations-sorter: method
    tags-sorter: alpha
    display-request-duration: true
    disable-swagger-default-url: true
  default-produces-media-type: application/json
  paths-to-match: /api/**
  show-actuator: false
  # Configuración específica para WebFlux
  webjars:
    prefix: /webjars

# ================================
# MANAGEMENT & ACTUATOR
# ================================
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
    metrics:
      enabled: true
    prometheus:
      enabled: true

# ================================
# LOGGING CONFIGURATION
# ================================
logging:
  level:
    root: INFO
    pe.edu.vallegrande: DEBUG
    org.springframework.web: DEBUG
    org.springframework.data.mongodb: DEBUG
    org.springframework.web.reactive: DEBUG
    reactor.netty: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
